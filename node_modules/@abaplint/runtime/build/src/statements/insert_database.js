"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InsertDatabase = void 0;
class InsertDatabase {
    constructor(context) {
        this.context = context;
    }
    async insertDatabase(table, options) {
        const columns = [];
        const values = [];
        const structure = options.values.get();
        for (const k of Object.keys(structure)) {
            columns.push(k);
            // todo, integers should not be surrounded by '"'?
            values.push('"' + structure[k].get().replace(/"/g, "\"\"") + '"');
        }
        if (typeof table !== "string") {
            table = table.get();
        }
        const { subrc, dbcnt } = await this.context.defaultDB().insert({ table, columns, values });
        // @ts-ignore
        abap.builtin.sy.get().subrc.set(subrc);
        // @ts-ignore
        abap.builtin.sy.get().dbcnt.set(dbcnt);
        return subrc;
    }
}
exports.InsertDatabase = InsertDatabase;
//# sourceMappingURL=insert_database.js.map