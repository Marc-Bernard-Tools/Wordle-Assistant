"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.modifyInternal = void 0;
const types_1 = require("../types");
const delete_internal_1 = require("./delete_internal");
const insert_internal_1 = require("./insert_internal");
const read_table_1 = require("./read_table");
function modifyInternal(table, options) {
    let found = false;
    if (options.index) {
        const index = options.index.get() - 1;
        found = table.array()[index] !== undefined;
        if (found) {
            table.deleteIndex(index);
            table.insertIndex(options.from, index);
        }
    }
    else if (options.from) {
        const readResult = (0, read_table_1.readTable)(table, { from: options.from });
        if (readResult.subrc === 0) {
            (0, delete_internal_1.deleteInternal)(table, { index: new types_1.Integer().set(readResult.foundIndex) });
        }
        (0, insert_internal_1.insertInternal)({ table, data: options.from });
    }
    const subrc = found ? 0 : 4;
    // @ts-ignore
    abap.builtin.sy.get().subrc.set(subrc);
}
exports.modifyInternal = modifyInternal;
//# sourceMappingURL=modify_internal.js.map