"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.split = void 0;
const types_1 = require("../types");
function split(param) {
    const source = typeof param.source === "string" ? param.source : param.source.get();
    const at = typeof param.at === "string" ? param.at : param.at.get();
    const split = source.includes(at) ? source.split(at) : [];
    if (source.endsWith(at)) {
        split.pop();
    }
    if (param.table) {
        param.table.clear();
        for (const s of split) {
            param.table.append(new types_1.String().set(s));
        }
        if (source !== "" && split.length === 0) {
            param.table.append(new types_1.String().set(source));
        }
    }
    if (param.targets) {
        if (split.length === 0) {
            split.push(source);
        }
        for (const t of param.targets) {
            t.clear();
            if (split.length > 0) {
                t.set(split.shift().trimEnd());
            }
        }
        if (split.length > 0) {
            const concat = split.join(at);
            const last = param.targets[param.targets.length - 1];
            last.set(last.get() + at + concat);
        }
    }
}
exports.split = split;
//# sourceMappingURL=split.js.map