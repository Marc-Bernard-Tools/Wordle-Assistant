"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.find = void 0;
const types_1 = require("../types");
function find(input) {
    var _a, _b, _c, _d;
    const val = typeof input.val === "string" ? input.val : input.val.get();
    if (input.regex) {
        const caseInput = typeof input.case === "string" ? input.case : (_a = input.case) === null || _a === void 0 ? void 0 : _a.get();
        const regex = typeof input.regex === "string" ? input.regex : input.regex.get();
        const flags = caseInput !== "X" ? "i" : "";
        const reg = new RegExp(regex, flags);
        const ret = (_b = val.match(reg)) === null || _b === void 0 ? void 0 : _b.index;
        if (ret !== undefined) {
            return new types_1.Integer().set(ret);
        }
        else {
            return new types_1.Integer().set(-1);
        }
    }
    else {
        const sub = typeof input.sub === "string" ? input.sub : (_c = input.sub) === null || _c === void 0 ? void 0 : _c.get();
        const off = typeof input.off === "number" ? input.off : (_d = input.off) === null || _d === void 0 ? void 0 : _d.get();
        const found = val.indexOf(sub || "", off);
        return new types_1.Integer().set(found);
    }
}
exports.find = find;
//# sourceMappingURL=find.js.map