"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.count = void 0;
const compare_1 = require("../compare");
const types_1 = require("../types");
function count(input) {
    let found = 0;
    const val = input.val.get();
    let reg = "";
    if (input.sub) {
        reg = input.sub.get();
        reg = reg.replace(/\*/g, "\\*");
    }
    else if (input.regex) {
        reg = input.regex.get();
    }
    let options = "g";
    if (input.case && (0, compare_1.initial)(input.case)) {
        options += "i";
    }
    if (val !== "") {
        const res = val.match(new RegExp(reg, options));
        if (res) {
            found = res.length;
        }
    }
    return new types_1.Integer().set(found);
}
exports.count = count;
//# sourceMappingURL=count.js.map