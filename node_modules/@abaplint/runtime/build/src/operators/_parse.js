"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = void 0;
const types_1 = require("../types");
const xstring_1 = require("../types/xstring");
function parse(val) {
    if (typeof val === "number") {
        return val;
    }
    else if (typeof val === "string") {
        return parseInt(val, 10);
    }
    else if (val instanceof types_1.Float) {
        return val.getRaw();
    }
    else if (val instanceof xstring_1.XString || val instanceof types_1.Hex) {
        if (val.get() === "") {
            return 0;
        }
        let num = parseInt(val.get(), 16);
        // handle two complement,
        if (val instanceof types_1.Hex && val.getLength() >= 4) {
            const maxVal = Math.pow(2, val.get().length / 2 * 8);
            if (num > maxVal / 2 - 1) {
                num = num - maxVal;
            }
        }
        return num;
    }
    else if (val instanceof types_1.Time || val instanceof types_1.Date) {
        return val.getNumeric();
    }
    else {
        return parse(val.get());
    }
}
exports.parse = parse;
//# sourceMappingURL=_parse.js.map